#N canvas 265 218 744 450 10;
#N canvas 464 540 494 344 META 0;
#X text 12 45 LICENSE GPL v3;
#X text 12 215 RELEASE_DATE 2013;
#X text 12 195 WEBSITE https://sites.google.com/site/eargram/;
#X text 12 175 AUTHOR Gilberto Bernardes;
#X text 12 155 LIBRARY earGram_abs;
#X text 12 65 DESCRIPTION separates the firt received elemnt from the
remaining ones;
#X text 12 107 INLET_1 anything (reset);
#X text 12 93 INLET_0 anything;
#X text 12 122 OUTLET_0 anything;
#X text 12 136 OUTLET_1 anything;
#X restore 647 384 pd META;
#X obj 6 7 cnv 15 700 60 empty empty keyInduction 20 12 0 14 -233017
-66577 0;
#X text 20 47 Estimates the key of a musical input;
#X floatatom 47 385 5 0 0 0 - - -, f 5;
#X symbolatom 128 382 10 0 0 0 - - -, f 10;
#X msg 356 335 reset;
#X msg 167 274 symbol Temperley;
#X msg 192 295 symbol Chew;
#X msg 216 315 symbol K-K;
#X msg 224 335 symbol Shaâ€™ath;
#N canvas 0 22 379 200 openFile 0;
#X obj 57 127 dac~;
#X obj 35 156 outlet~;
#X obj 217 32 openpanel;
#X obj 217 98 soundfiler;
#X obj 35 20 inlet;
#X obj 217 10 inlet;
#X obj 217 120 table \$0-sound;
#X obj 35 89 tabplay~ \$0-sound;
#X obj 217 54 pack s \$0;
#X msg 217 76 read -resize \$1 \$2-sound;
#X obj 35 42 sel 0 1;
#X msg 35 64 stop;
#X connect 2 0 8 0;
#X connect 4 0 10 0;
#X connect 5 0 2 0;
#X connect 7 0 0 0;
#X connect 7 0 0 1;
#X connect 7 0 1 0;
#X connect 8 0 9 0;
#X connect 9 0 3 0;
#X connect 10 0 11 0;
#X connect 10 1 7 0;
#X connect 11 0 7 0;
#X restore 47 134 pd openFile;
#X obj 120 100 bng 15 250 50 0 empty empty 1)open 17 7 0 10 -260097
-1 -1;
#X obj 47 100 tgl 15 0 empty empty 2)play 17 7 0 10 -260097 -1 -1 0
1;
#X floatatom 198 124 5 0 0 0 - - -, f 5;
#X msg 198 143 npts \$1;
#X floatatom 323 124 5 0 0 0 - - -, f 5;
#X msg 323 143 npeak \$1;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-chromagramRT 12 float 2;
#X coords 0 1 12 0 196 140 1 0 0;
#X restore 486 189 graph;
#N canvas 547 194 390 267 chromagram 0;
#X obj 34 29 inlet;
#N canvas 0 22 450 300 list 0;
#N canvas 0 22 199 262 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 152 84 pd drip;
#X obj 153 219 list prepend;
#X obj 251 219 t a;
#N canvas 0 22 450 300 dripslow 0;
#X obj 158 196 list split 1;
#X obj 158 171 list append;
#X obj 158 247 outlet;
#X obj 158 47 inlet;
#X obj 239 247 outlet;
#X obj 232 45 inlet;
#X obj 158 82 b;
#X text 275 46 list;
#X text 113 47 bang;
#X text 283 247 EOL;
#X text 99 246 element;
#X obj 239 217 b;
#X connect 0 0 2 0;
#X connect 0 1 1 1;
#X connect 0 2 11 0;
#X connect 1 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 1 1;
#X connect 6 0 1 0;
#X connect 11 0 4 0;
#X restore 205 141 pd dripslow;
#X obj 268 106 inlet;
#X obj 152 110 t f b;
#X obj 132 254 list;
#X obj 152 182 + 0;
#X obj 133 24 inlet;
#X obj 132 274 outlet;
#X obj 132 50 t b a b;
#X msg 167 157 0;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 6 1;
#X connect 2 0 1 1;
#X connect 3 0 7 1;
#X connect 4 0 3 1;
#X connect 5 0 7 0;
#X connect 5 1 3 0;
#X connect 6 0 9 0;
#X connect 7 0 1 0;
#X connect 8 0 10 0;
#X connect 10 0 6 0;
#X connect 10 1 0 0;
#X connect 10 2 1 1;
#X connect 10 2 11 0;
#X connect 11 0 7 1;
#X restore 34 76 pd list add;
#X obj 118 93 list;
#N canvas 0 22 252 341 list 0;
#X obj 41 139 route float;
#X obj 20 228 f;
#X obj 20 255 outlet;
#X obj 20 26 inlet;
#N canvas 0 22 450 300 once 0;
#X obj 110 75 inlet;
#X obj 105 187 spigot 1;
#X obj 110 104 t b f;
#X msg 125 151 0;
#X msg 165 99 1;
#X obj 165 63 inlet;
#X obj 102 219 outlet;
#X connect 0 0 2 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 2 1 1 0;
#X connect 3 0 1 1;
#X connect 4 0 1 1;
#X connect 5 0 4 0;
#X restore 107 182 pd once;
#X obj 72 199 f;
#X obj 41 199 max;
#X obj 20 56 t b a b;
#X obj 41 165 t a a;
#N canvas 0 22 199 243 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 41 114 pd drip;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 3 0 7 0;
#X connect 4 0 6 1;
#X connect 5 0 6 1;
#X connect 6 0 5 0;
#X connect 6 0 1 1;
#X connect 7 0 1 0;
#X connect 7 1 9 0;
#X connect 7 2 4 1;
#X connect 8 0 6 0;
#X connect 8 1 4 0;
#X connect 9 0 0 0;
#X restore 126 119 pd list max;
#X obj 34 102 t l l;
#X obj 111 154 /;
#N canvas 381 107 467 423 list 0;
#X obj 96 43 inlet;
#X obj 285 62 inlet;
#X obj 161 362 outlet;
#X obj 180 258 outlet;
#X obj 161 327 list;
#X obj 285 225 list prepend;
#X obj 364 195 t a;
#X obj 161 165 t b a a b;
#X obj 96 68 route bang;
#X obj 96 93 b;
#X obj 161 94 t b a;
#X obj 161 134 list;
#N canvas 0 22 199 262 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 179 218 pd drip;
#X connect 0 0 8 0;
#X connect 1 0 5 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 5 0 4 1;
#X connect 6 0 5 1;
#X connect 7 0 4 0;
#X connect 7 1 12 0;
#X connect 7 2 4 1;
#X connect 7 3 5 1;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 9 0 11 0;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 11 0 7 0;
#X connect 12 0 3 0;
#X restore 34 155 pd list map;
#X obj 34 180 list prepend 0;
#X msg 239 190 const 0;
#X obj 34 207 s \$0-chromagramRT;
#X obj 239 76 r \$0-reset;
#X obj 6 234 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 5 1;
#X connect 4 0 6 0;
#X connect 4 1 3 0;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 6 0 11 0;
#X connect 6 1 5 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 10 0 8 0;
#X connect 10 0 2 0;
#X restore 47 211 pd chromagram;
#X floatatom 262 124 5 0 0 0 - - -, f 5;
#X msg 262 143 hop \$1;
#N canvas 210 23 902 405 non-realtime 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-chromagramNRT 12 float 2;
#X coords 0 1 12 0 196 140 1 0 0;
#X restore 596 128 graph;
#N canvas 0 22 379 200 openFile 0;
#X obj 34 43 openpanel;
#X obj 34 109 soundfiler;
#X obj 34 21 inlet;
#X obj 34 65 pack s \$0;
#X obj 114 109 table \$0-sample;
#X msg 34 87 read -resize \$1 \$2-sample;
#X obj 34 131 b;
#X obj 34 153 outlet;
#X connect 0 0 3 0;
#X connect 1 0 6 0;
#X connect 2 0 0 0;
#X connect 3 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 7 0;
#X restore 104 128 pd openFile;
#X obj 104 105 bng 15 250 50 0 empty empty 1)open 17 7 0 10 -262144
-1 -1;
#N canvas 0 23 930 590 chroma 0;
#X msg 461 277 normalize \$1;
#X obj 461 256 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 173 378 list prepend 0;
#N canvas 547 194 388 408 chromagram 0;
#X obj 34 29 inlet;
#X obj 159 93 list;
#X obj 94 131 list prepend 0;
#X obj 94 157 s \$0-chromagram;
#N canvas 0 22 450 300 list 0;
#N canvas 0 22 199 262 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 152 84 pd drip;
#X obj 153 219 list prepend;
#X obj 251 219 t a;
#N canvas 0 22 450 300 dripslow 0;
#X obj 158 196 list split 1;
#X obj 158 171 list append;
#X obj 158 247 outlet;
#X obj 158 47 inlet;
#X obj 239 247 outlet;
#X obj 232 45 inlet;
#X obj 158 82 b;
#X text 275 46 list;
#X text 113 47 bang;
#X text 283 247 EOL;
#X text 99 246 element;
#X obj 239 217 b;
#X connect 0 0 2 0;
#X connect 0 1 1 1;
#X connect 0 2 11 0;
#X connect 1 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 1 1;
#X connect 6 0 1 0;
#X connect 11 0 4 0;
#X restore 205 141 pd dripslow;
#X obj 268 106 inlet;
#X obj 152 110 t f b;
#X obj 132 254 list;
#X obj 152 182 + 0;
#X obj 133 24 inlet;
#X obj 132 274 outlet;
#X obj 132 50 t b a b;
#X msg 167 157 0;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 6 1;
#X connect 2 0 1 1;
#X connect 3 0 7 1;
#X connect 4 0 3 1;
#X connect 5 0 7 0;
#X connect 5 1 3 0;
#X connect 6 0 9 0;
#X connect 7 0 1 0;
#X connect 8 0 10 0;
#X connect 10 0 6 0;
#X connect 10 1 0 0;
#X connect 10 2 1 1;
#X connect 10 2 11 0;
#X connect 11 0 7 1;
#X restore 34 76 pd list accum;
#X msg 175 38 0 0 0 0 0 0 0 0 0 0 0 0;
#X obj 171 8 inlet;
#X obj 14 220 outlet;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 3 0;
#X connect 4 0 1 0;
#X connect 4 0 2 0;
#X connect 4 0 7 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X restore 344 356 pd chromagram;
#X floatatom 279 257 5 0 0 0 - - -, f 5;
#X obj 173 400 s \$0-chroma;
#X text 198 452 chromagram is a histogram of successive chroma vector
;
#X obj 173 294 hpcp 20;
#X msg 279 277 npeak \$1;
#X msg 354 277 samplerate \$1;
#X floatatom 354 256 5 0 0 0 - - -, f 5;
#X obj 173 176 pack f s;
#X obj 248 159 symbol \$0-sample;
#X obj 248 135 loadbang;
#X obj 561 256 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 561 277 tuning \$1;
#X msg 173 207 analyze \$1 16384 \$2 44100;
#X obj 152 51 symbol \$0-sample;
#X obj 152 31 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 172 139 +;
#X obj 248 112 0;
#X msg 354 404 const 0;
#X obj 172 117 until;
#X obj 344 311 list prepend 0;
#X obj 344 333 s \$0-chromaFilt;
#X obj 354 426 s \$0-chromagramFilt;
#X obj 477 421 s \$0-chromagram;
#X obj 152 94 t b f b;
#X obj 404 210 s \$0-chromagram;
#X msg 404 188 normalize;
#X obj 452 233 s \$0-chromagramFilt;
#N canvas 547 194 388 408 chromagramFilt 0;
#X obj 34 29 inlet;
#N canvas 0 22 450 300 list 0;
#N canvas 0 22 199 262 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 152 84 pd drip;
#X obj 153 219 list prepend;
#X obj 251 219 t a;
#N canvas 0 22 450 300 dripslow 0;
#X obj 158 196 list split 1;
#X obj 158 171 list append;
#X obj 158 247 outlet;
#X obj 158 47 inlet;
#X obj 239 247 outlet;
#X obj 232 45 inlet;
#X obj 158 82 b;
#X text 275 46 list;
#X text 113 47 bang;
#X text 283 247 EOL;
#X text 99 246 element;
#X obj 239 217 b;
#X connect 0 0 2 0;
#X connect 0 1 1 1;
#X connect 0 2 11 0;
#X connect 1 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 1 1;
#X connect 6 0 1 0;
#X connect 11 0 4 0;
#X restore 205 141 pd dripslow;
#X obj 268 106 inlet;
#X obj 152 110 t f b;
#X obj 132 254 list;
#X obj 152 182 + 0;
#X obj 133 24 inlet;
#X obj 132 274 outlet;
#X obj 132 50 t b a b;
#X msg 167 157 0;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 6 1;
#X connect 2 0 1 1;
#X connect 3 0 7 1;
#X connect 4 0 3 1;
#X connect 5 0 7 0;
#X connect 5 1 3 0;
#X connect 6 0 9 0;
#X connect 7 0 1 0;
#X connect 8 0 10 0;
#X connect 10 0 6 0;
#X connect 10 1 0 0;
#X connect 10 2 1 1;
#X connect 10 2 11 0;
#X connect 11 0 7 1;
#X restore 34 76 pd list add;
#X obj 114 181 list prepend 0;
#X obj 114 207 s \$0-chromagramFilt;
#X obj 159 93 list;
#X msg 175 38 0 0 0 0 0 0 0 0 0 0 0 0;
#X obj 171 8 inlet;
#X obj 34 155 outlet;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 0 2 0;
#X connect 1 0 7 0;
#X connect 2 0 3 0;
#X connect 4 0 1 1;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X restore 195 421 pd chromagramFilt;
#X obj 152 72 expr ((size("$s1")-16384)/2048);
#X obj 200 139 + 2048;
#X obj 110 495 list;
#X obj 315 507 list;
#X obj 110 551 outlet;
#X obj 315 559 outlet;
#X obj 152 9 inlet;
#X msg 28 73 1.323e+06;
#X obj 12 101 expr ($f1-16384)/2048;
#X connect 0 0 7 0;
#X connect 1 0 0 0;
#X connect 2 0 5 0;
#X connect 4 0 8 0;
#X connect 7 0 3 0;
#X connect 7 0 23 0;
#X connect 7 0 35 1;
#X connect 7 0 2 0;
#X connect 8 0 7 0;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 11 0 16 0;
#X connect 12 0 11 1;
#X connect 13 0 12 0;
#X connect 14 0 15 0;
#X connect 15 0 7 0;
#X connect 16 0 7 0;
#X connect 18 0 17 0;
#X connect 18 0 39 0;
#X connect 19 0 11 0;
#X connect 19 0 33 0;
#X connect 20 0 19 1;
#X connect 21 0 25 0;
#X connect 21 0 26 0;
#X connect 22 0 19 0;
#X connect 23 0 24 0;
#X connect 27 0 29 0;
#X connect 27 0 34 0;
#X connect 27 0 35 0;
#X connect 27 1 22 0;
#X connect 27 2 20 0;
#X connect 27 2 21 0;
#X connect 27 2 31 1;
#X connect 27 2 3 1;
#X connect 29 0 28 0;
#X connect 29 0 30 0;
#X connect 31 0 34 1;
#X connect 32 0 27 0;
#X connect 33 0 19 1;
#X connect 34 0 36 0;
#X connect 35 0 37 0;
#X connect 38 0 18 0;
#X connect 39 0 40 0;
#X connect 40 0 27 0;
#X restore 104 151 pd chroma;
#X text 222 169 key profiles;
#X floatatom 104 302 5 0 0 0 - - -, f 5;
#X symbolatom 185 299 10 0 0 0 - - -, f 10;
#X msg 413 252 reset;
#X msg 224 191 symbol Temperley;
#X msg 249 212 symbol Chew;
#X msg 273 232 symbol K-K;
#X msg 281 252 symbol Shaâ€™ath;
#X obj 413 227 r \$0-reset;
#X obj 104 211 tis --------;
#X obj 104 269 keyInduction;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 13 0;
#X connect 7 0 14 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 10 0 14 0;
#X connect 11 0 14 0;
#X connect 12 0 7 0;
#X connect 13 0 14 0;
#X connect 13 2 14 1;
#X connect 14 0 5 0;
#X connect 14 1 6 0;
#X restore 48 414 pd non-realtime;
#X obj 47 352 keyInduction;
#X obj 486 111 bng 15 250 50 0 empty empty empty 17 7 0 10 -258113
-1 -1;
#X obj 486 143 s \$0-reset;
#X text 517 34 Gilberto Bernardes et al.;
#X text 629 48 INESC TEC;
#X obj 356 310 r \$0-reset;
#X text 165 252 Key profiles;
#X obj 167 197 loadbang;
#X msg 167 221 weights audio;
#X obj 47 238 tis --------;
#X obj 47 160 hpcp~;
#X msg 313 217 bias \$1;
#X floatatom 313 197 5 0 0 0 - - -, f 5;
#X connect 5 0 22 0;
#X connect 6 0 22 0;
#X connect 7 0 22 0;
#X connect 8 0 22 0;
#X connect 9 0 22 0;
#X connect 10 0 32 0;
#X connect 11 0 10 1;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 32 1;
#X connect 15 0 16 0;
#X connect 16 0 32 1;
#X connect 18 0 31 0;
#X connect 19 0 20 0;
#X connect 20 0 32 1;
#X connect 22 0 3 0;
#X connect 22 1 4 0;
#X connect 23 0 24 0;
#X connect 27 0 5 0;
#X connect 29 0 30 0;
#X connect 30 0 22 0;
#X connect 30 0 31 0;
#X connect 31 0 22 0;
#X connect 31 2 22 1;
#X connect 32 0 18 0;
#X connect 33 0 22 0;
#X connect 34 0 33 0;
